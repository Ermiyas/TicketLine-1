<div *ngIf="error" class="alert alert-danger alert-dismissible fade show" role="alert">
  <strong>Error! </strong> {{ errorMessage }}
  <button type="button" (click)="vanishError()" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>


<div class="mt-4 container">
  <div class="row p-2 mb-4">
    <button type="button" class="btn btn-secondary btn-sm mr-4"
            data-toggle="modal" data-target=".create-ticket-modal">Add Ticket
    </button>

    <div class="modal fade create-ticket-modal" tabindex="-1" role="dialog" aria-labelledby="Create ticket modal" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Create Ticket</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>

          <div class="modal-body">
            <form class="form" [formGroup]="ticketForm">

              <div class="form-group">
                <label for="inputFirstname">First Name</label>
                <input type="text" name="firstname" formControlName="firstname" class="form-control" id="inputFirstnameSearch"
                       aria-describedby="firstnameHelp" placeholder="Enter first name">
                <div *ngIf="submitted && ticketForm.controls.firstname.errors" class="error">
                  <small class="form-text text-warning" *ngIf="ticketForm.controls.firstname.errors.required">Customer first name is
                    required!
                  </small>
                </div>
              </div>

              <div class="form-group">
                <label for="inputName">Name</label>
                <input type="text" name="name" formControlName="name" class="form-control" id="inputNameSearch"
                       aria-describedby="nameHelp" placeholder="Enter (last) name">
                <div *ngIf="submitted && ticketForm.controls.name.errors" class="error">
                  <small class="form-text text-warning" *ngIf="ticketForm.controls.name.errors.required">Customer (last) name is
                    required!
                  </small>
                </div>
              </div>

              <div class="form-group">
                <label for="inputBirthday">Birthday</label>
                <input type="date" name="birthday" formControlName="birthday" class="form-control" id="inputBirthdaySearch"
                       aria-describedby="birthdayHelp" placeholder="Enter birthday">
                <div *ngIf="submitted && ticketForm.controls.birthday.errors" class="error">
                  <small class="form-text text-warning" *ngIf="ticketForm.controls.birthday.errors.required">Customer birthday is
                    required!
                  </small>
                </div>
              </div>


              <!-- TODO: (click)="searchCustomer()" -->
              <button type="button"  class="btn btn-success float-left" data-dismiss="modal">Search</button>

              <br>
              <br>
              <button type="button" class="btn btn-success float-left"
                      data-toggle="modal" data-target="#ticket-modal-new-customer"
                      data-dismiss="modal">New Customer</button>
              <br>
              <br>
              <!-- TODO: (click)="buyTicket()" -->
              <button type="button" class="btn btn-success float-left" data-dismiss="modal">Anonynmous</button>
            </form>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="ticket-modal-new-customer" tabindex="-1" role="dialog" aria-labelledby="Ticket new customer modal" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Buy Ticket - New Customer</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body">
        <div class="form-group">
          <label for="inputName">Name</label>
          <input type="text" name="name" formControlName="name" class="form-control" id="inputName"
                 aria-describedby="nameHelp" placeholder="Enter (last) name">
          <div *ngIf="submitted && ticketForm.controls.name.errors" class="error">
            <small class="form-text text-warning" *ngIf="ticketForm.controls.name.errors.required">Customer (last) name is
              required!
            </small>
          </div>
        </div>

        <div class="form-group">
          <label for="inputFirstname">First Name</label>
          <input type="text" name="firstname" formControlName="firstname" class="form-control" id="inputFirstname"
                 aria-describedby="firstnameHelp" placeholder="Enter first name">
          <div *ngIf="submitted && ticketForm.controls.firstname.errors" class="error">
            <small class="form-text text-warning" *ngIf="ticketForm.controls.firstname.errors.required">Customer first name is
              required!
            </small>
          </div>
        </div>

        <div class="form-group">
          <label for="inputEmail">E-Mail</label>
          <input type="text" name="email" formControlName="email" class="form-control" id="inputEmail"
                 aria-describedby="emailHelp" placeholder="Enter e-mail address">
          <div *ngIf="submitted && ticketForm.controls.email.errors" class="error">
            <small class="form-text text-warning" *ngIf="ticketForm.controls.email.errors.required">Customer e-mail address is
              required!
            </small>
            <small class="form-text text-warning" *ngIf="ticketForm.controls.email.errors.email &&
                !ticketForm.controls.email.errors.required">Please enter a valid e-mail address!
            </small>
          </div>
        </div>

        <div class="form-group">
          <label for="inputBirthday">Birthday</label>
          <input type="date" name="birthday" formControlName="birthday" class="form-control" id="inputBirthday"
                 aria-describedby="birthdayHelp" placeholder="Enter birthday">
          <div *ngIf="submitted && ticketForm.controls.birthday.errors" class="error">
            <small class="form-text text-warning" *ngIf="ticketForm.controls.birthday.errors.required">Customer birthday is
              required!
            </small>
          </div>
        </div>

        <form>
          <input type="radio" name="status" value="buy" checked> Buy Ticket<br>
          <input type="radio" name="status" value="reservation"> Reservation<br>
        </form>
        <br>

        <button type="button" (click)="addTicketAndCustomer()" class="btn btn-success float-left" data-dismiss="modal">Continue</button>
      </div>

    </div>
  </div>
</div>
